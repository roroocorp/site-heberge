<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Daily Life IA Ultra</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui;}
html,body{width:100%;height:100%;overflow-x:hidden;transition:0.3s;}
body{background:#5b21b6;color:#fff;padding:10px;}
.container{max-width:420px;margin:auto}

/* THEMES */
body.green{background:linear-gradient(180deg,#064e3b,#042f2e);}
body.red{background:linear-gradient(180deg,#7f1d1d,#450a0a);}
body.blue{background:linear-gradient(180deg,#1e3a8a,#020617);}
body.rose{background:linear-gradient(180deg,#9d174d,#4a044e);}
body.violet{background:linear-gradient(180deg,#5b21b6,#2e1065);}
body.orange{background:linear-gradient(180deg,#f97316,#c2410c);}

/* HEADER */
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;padding-top:6px;}
header h1{font-size:20px;}
.menu-btn{font-size:24px;cursor:pointer;user-select:none;}

/* CARD */
.card{background:rgba(255,255,255,.12);backdrop-filter:blur(14px);border-radius:18px;padding:14px;margin-bottom:12px;}
input,select,button{width:100%;padding:10px;border:none;border-radius:12px;margin-top:6px;}
input,select{background:rgba(255,255,255,.9);}
button{background:rgba(255,255,255,.2);color:#fff;font-weight:bold;cursor:pointer;}
ul{list-style:none;margin-top:6px;}
li{background:rgba(255,255,255,.15);padding:8px;border-radius:10px;margin-top:6px;user-select:none;}
li.done{text-decoration:line-through;opacity:.6;}

/* SIDEBAR */
#sidebar{position:fixed;top:0;left:-100%;width:75%;max-width:280px;height:100%;background:#0f172a;padding:15px;transition:.3s;z-index:10;}
#sidebar.active{left:0;}
#sidebar h3{margin-bottom:10px;}
.item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #334;cursor:pointer;}
.del{opacity:.6;font-size:14px;}

/* CHAT */
#chat{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#020617;z-index:9;flex-direction:column;}
#messages{flex:1;overflow-y:auto;padding:10px;}
.msg{margin-bottom:6px;}
.user{color:#38bdf8;}
.ai{color:#a7f3d0;}

/* CHAT INPUT */
#chatInputContainer{display:flex;gap:6px;padding:6px;background:rgba(0,0,0,0.1);border-radius:12px;}
#chatInput{flex:1;padding:10px;border-radius:12px;border:none;}
#chatSend{width:50px;height:50px;border-radius:50%;background:#38bdf8;color:#fff;font-weight:bold;cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:20px;}
#chatSend::after{content:"‚Üë";} /* fl√®che style ChatGPT */

/* TIME DISPLAY */
#timeDisplay{position:fixed;bottom:10px;left:10px;font-size:14px;opacity:.8;color:#fff;}
</style>
</head>
<body class="green">

<!-- SIDEBAR -->
<div id="sidebar">
<h3>üìú Historique</h3>
<div class="item" onclick="newConversation()">‚ûï Nouvelle conversation</div>
<div id="convList"></div>
<div class="item" onclick="goHome()">üè† Accueil</div>
</div>

<!-- CHAT -->
<div id="chat">
<header>
<h1 id="chatTitle">Conversation</h1>
<span class="menu-btn" onclick="toggleMenu()">‚ò∞</span>
</header>
<div id="messages"></div>
<div id="chatInputContainer">
<input id="chatInput" placeholder="√âcris un message..." onkeydown="if(event.key==='Enter'){sendMsg();event.preventDefault()}">
<button id="chatSend" onclick="sendMsg()"></button>
</div>
</div>

<!-- MAIN -->
<div class="container" id="main">
<header>
<h1>Daily Life IA Ultra</h1>
<span class="menu-btn" onclick="toggleMenu()">‚ò∞</span>
</header>

<div class="card">
<h3>üåç Langue</h3>
<select id="langSelect" onchange="changeLang(this.value)">
<option value="fr">Fran√ßais</option>
<option value="en">English</option>
<option value="es">Espa√±ol</option>
<option value="de">Deutsch</option>
</select>
</div>

<div class="card">
<h3>üé® Th√®me</h3>
<select id="themeSelect" onchange="changeTheme(this.value)">
<option value="green">Vert</option>
<option value="red">Rouge</option>
<option value="blue">Bleu</option>
<option value="rose">Rose</option>
<option value="violet">Violet</option>
<option value="orange">Orange</option>
</select>
</div>

<div class="card">
<h3>üìä Stats</h3>
<p>Points : <span id="points">0</span></p>
<p>Niveau : <span id="level">1</span></p>
</div>

<div class="card">
<h3>‚úÖ T√¢ches</h3>
<input id="taskInput" placeholder="Nouvelle t√¢che">
<button onclick="addTask()">Ajouter</button>
<ul id="tasks"></ul>
</div>

<div class="card">
<h3>üßë‚Äçüç≥ Menu semaine</h3>
<button onclick="generateMenu()">G√©n√©rer</button>
<ul id="menu"></ul>
</div>

<div class="card">
<h3>üõí Liste de courses</h3>
<button onclick="generateCourses()">Depuis menu</button>
<ul id="courses"></ul>
</div>

<div class="card">
<h3>‚è∞ Rappel</h3>
<input type="time" id="alarm">
<button onclick="setAlarm()">Activer</button>
</div>
</div>

<!-- TIME -->
<div id="timeDisplay"></div>

<script>
/* ===== GLOBAL ===== */
let lang = localStorage.lang || "fr";
let theme = localStorage.theme || "green";
let points = Number(localStorage.points || 0);
let tasks = JSON.parse(localStorage.tasks || "[]");
let conversations = JSON.parse(localStorage.conversations || "[]");
let menu = JSON.parse(localStorage.menu || "[]");
let courses = JSON.parse(localStorage.courses || "[]");
let currentConv = null;
document.body.className = theme;
document.getElementById("langSelect").value = lang;
document.getElementById("themeSelect").value = theme;

const meals=[
{title:"Spaghetti Bolognese",instr:"Cuire les p√¢tes, pr√©parer la sauce bolognaise, m√©langer et servir."},
{title:"Poulet Curry",instr:"Faire revenir le poulet, ajouter curry et lait de coco, mijoter 20 min."},
{title:"Salade C√©sar",instr:"M√©langer laitue, poulet, parmesan, cro√ªtons, sauce C√©sar."},
{title:"Pizza Margherita",instr:"√âtaler la p√¢te, ajouter tomate, mozzarella, basilic, cuire 12 min."},
{title:"Tacos",instr:"Pr√©parer les tortillas, ajouter viande, l√©gumes et sauce."},
{title:"Riz saut√©",instr:"Faire sauter riz, l√©gumes et ≈ìufs dans un wok."},
{title:"Soupe l√©gumes",instr:"Faire bouillir l√©gumes, mixer et assaisonner."},
{title:"Burger",instr:"Cuire steak, toaster pain, assembler burger avec garnitures."},
{title:"Poisson grill√©",instr:"Assaisonner poisson, griller 8 min, servir chaud."},
{title:"Paella",instr:"Cuire riz, safran, fruits de mer, poulet et l√©gumes ensemble."},
// ... tu peux rajouter jusqu'√† 1000 recettes ici
];

/* ===== SAVE ===== */
function saveAll(){
  localStorage.lang = lang;
  localStorage.theme = theme;
  localStorage.points = points;
  localStorage.tasks = JSON.stringify(tasks);
  localStorage.conversations = JSON.stringify(conversations);
  localStorage.menu = JSON.stringify(menu);
  localStorage.courses = JSON.stringify(courses);
  renderAll();
}

/* ===== RENDER ===== */
function renderAll(){
  document.getElementById("points").textContent = points;
  document.getElementById("level").textContent = Math.floor(points/50)+1;
  renderTasks();
  renderConvList();
  renderMenu();
  renderCourses();
  updateTime();
}

/* ===== MENU SIDEBAR ===== */
function toggleMenu(){sidebar.classList.toggle("active");}
function goHome(){chat.style.display="none";main.style.display="block";sidebar.classList.remove("active");}

/* ===== CONVERSATIONS ===== */
function newConversation(){
  const id = Date.now();
  conversations.unshift({id, title:`Conversation ${conversations.length+1}`, msgs:[]});
  currentConv = id;
  saveAll();
  openChat();
}

function renderConvList(){
  convList.innerHTML = "";
  conversations.forEach((c,i)=>{
    c.title=`Conversation ${conversations.length-i}`;
    let d = document.createElement("div");
    d.className="item";
    d.innerHTML=`<span>${c.title}</span><span class="del">üóëÔ∏è</span>`;
    d.onclick=(e)=>{
      if(e.target.classList.contains("del")){
        conversations = conversations.filter(x=>x.id!==c.id);
        if(currentConv===c.id) goHome();
        saveAll();
      }else{
        currentConv = c.id;
        openChat();
      }
    };
    convList.appendChild(d);
  });
}

function openChat(){
  if(currentConv===null) return;
  const c = conversations.find(x=>x.id===currentConv);
  if(!c) return;
  chat.style.display="flex";
  main.style.display="none";
  sidebar.classList.remove("active");
  renderMessages();
  chatInput.focus();
}

/* ===== CHAT ===== */
function renderMessages(){
  messages.innerHTML="";
  const c=conversations.find(x=>x.id===currentConv);
  if(!c)return;
  chatTitle.textContent = c.title;
  c.msgs.forEach(m=>{
    messages.innerHTML+=`<div class="msg ${m.w}">${m.w==="user"?"üë§":"ü§ñ"} ${m.t}</div>`;
  });
  messages.scrollTop = messages.scrollHeight;
}

function sendMsg(){
  const t = chatInput.value.trim();
  if(!t||currentConv===null) return;
  const c = conversations.find(x=>x.id===currentConv);
  c.msgs.push({w:"user",t});
  chatInput.value="";
  setTimeout(()=>{
    c.msgs.push({w:"ai",t:smartAI(t)});
    saveAll();
    renderMessages();
  },300);
  saveAll();
}

/* ===== IA LOCALE INTELLIGENTE ===== */
function smartAI(text){
  text = text.toLowerCase();
  // recherche dans recettes
  let rec = meals.find(m => text.includes(m.title.toLowerCase()));
  if(rec) return `${rec.title} : ${rec.instr}`;
  // mots cl√©s g√©n√©raux
  if(text.includes("recette")||text.includes("menu")) return meals[Math.floor(Math.random()*meals.length)].title;
  if(text.includes("bonjour")||text.includes("salut")) return "Salut !";
  switch(lang){
    case "en": return "I am here to help you!";
    case "es": return "¬°Estoy aqu√≠ para ayudarte!";
    case "de": return "Ich bin hier, um dir zu helfen!";
    default: return "Je suis l√† pour t‚Äôaider.";
  }
}

/* ===== TASKS ===== */
function addTask(){
  if(taskInput.value){tasks.push({t:taskInput.value,d:false});taskInput.value="";points+=5;saveAll();}
}
function renderTasks(){
  tasksEl.innerHTML="";
  tasks.forEach((t,i)=>{
    let li=document.createElement("li");
    li.textContent=t.t;
    if(t.d) li.classList.add("done");
    li.onclick=()=>{t.d=!t.d;points+=5;saveAll();}
    li.ondblclick=()=>{tasks.splice(i,1);saveAll();} // double clic pour supprimer
    tasksEl.appendChild(li);
  });
}

/* ===== MENU & COURSES ===== */
function generateMenu(){menu=[];for(let i=0;i<7;i++)menu.push(meals[Math.floor(Math.random()*meals.length)].title);saveAll();}
function renderMenu(){menuEl.innerHTML="";menu.forEach(m=>menuEl.innerHTML+=`<li>${m}</li>`);}
function generateCourses(){courses=[...new Set(menu)];saveAll();}
function renderCourses(){coursesEl.innerHTML="";courses.forEach((c,i)=>{let li=document.createElement("li");li.textContent=c;coursesEl.appendChild(li);});}

/* ===== THEME & LANG ===== */
function changeTheme(t){theme=t;document.body.className=t;saveAll();}
function changeLang(l){lang=l;saveAll();}

/* ===== ALARM ===== */
function setAlarm(){
  Notification.requestPermission();
  const time = alarm.value;
  setInterval(()=>{
    const now = new Date().toTimeString().slice(0,5);
    if(now===time) new Notification("‚è∞ Rappel !");
  },30000);
}

/* ===== TIME DISPLAY ===== */
function updateTime(){
  const now = new Date();
  timeDisplay.textContent = now.toTimeString().slice(0,5);
}

/* ===== INIT ===== */
renderAll();
setInterval(updateTime,60000);
</script>
</body>
  </html>

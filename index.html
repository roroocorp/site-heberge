<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Daily Life Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:#e5e7eb;
}
header{
  background:#2563eb;
  padding:15px;
  text-align:center;
}
main{
  max-width:600px;
  margin:auto;
  padding:10px;
}
.card{
  background:#1e293b;
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
}
input, textarea, button{
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:8px;
  border:none;
  box-sizing:border-box;
}
button{
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
ul{padding:0;list-style:none}
li{padding:6px;cursor:pointer}
li.done{text-decoration:line-through;opacity:.6}
.badge{
  display:inline-block;
  background:gold;
  color:black;
  padding:5px 10px;
  border-radius:8px;
  margin:4px;
}
.chat{
  background:#020617;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  max-height:200px;
  overflow-y:auto;
  font-size:14px;
}
.user{color:#93c5fd;margin-bottom:6px}
.ai{color:#a7f3d0;margin-bottom:10px}
.category{
  font-size:13px;
  opacity:.8;
  margin-top:5px;
}
</style>
</head>

<body>
<header>
<h1>ğŸ¤– IA Daily Assistant</h1>
<p>Aide â€¢ Recettes â€¢ Organisation â€¢ DÃ©finitions</p>
</header>

<main>

<div class="card">
<h2>ğŸ“Š Progression</h2>
<p>â­ Points : <span id="points">0</span></p>
<p>ğŸ® Niveau : <span id="level">1</span></p>
<div id="badges"></div>
</div>

<div class="card">
<h2>âœ… TÃ¢ches</h2>
<input id="todoInput" placeholder="Ã‰cris une tÃ¢che">
<button onclick="addTodo()">Ajouter</button>
<ul id="list"></ul>
</div>

<div class="card">
<h2>ğŸ§  IA intelligente</h2>
<textarea id="aiInput" placeholder="Ex : recette pÃ¢tes, idÃ©e de repas, c'est quoi motivation..."></textarea>
<button onclick="runAI()">Envoyer</button>
<div class="category" id="aiCategory"></div>
<div class="chat" id="chat"></div>
</div>

</main>

<script>
let todos=JSON.parse(localStorage.getItem("todos")||"[]");
let chatHistory=JSON.parse(localStorage.getItem("chat")||"[]");
let points=Number(localStorage.getItem("points")||0);
let level=Number(localStorage.getItem("level")||1);

const list=document.getElementById("list");
const pointsEl=document.getElementById("points");
const levelEl=document.getElementById("level");
const badgesDiv=document.getElementById("badges");
const chat=document.getElementById("chat");

function save(){
  localStorage.setItem("todos",JSON.stringify(todos));
  localStorage.setItem("chat",JSON.stringify(chatHistory));
  localStorage.setItem("points",points);
  localStorage.setItem("level",level);
  pointsEl.textContent=points;
  levelEl.textContent=level;
  renderBadges();
}

function renderBadges(){
  badgesDiv.innerHTML="";
  if(points>=10) badgesDiv.innerHTML+='<span class="badge">ğŸ”¥ DÃ©butant</span>';
  if(points>=25) badgesDiv.innerHTML+='<span class="badge">ğŸ’ª MotivÃ©</span>';
  if(points>=50) badgesDiv.innerHTML+='<span class="badge">ğŸ† Expert</span>';
}

function renderTodos(){
  list.innerHTML="";
  todos.forEach((t,i)=>{
    const li=document.createElement("li");
    li.textContent=t.text;
    if(t.done) li.classList.add("done");

    li.onclick=()=>{
      if(!t.done){
        points+=5;
        if(points%20===0) level++;
      }
      t.done=!t.done;
      save(); renderTodos();
    };

    let timer;
    li.onmousedown=li.ontouchstart=()=>{
      timer=setTimeout(()=>{
        todos.splice(i,1);
        renderTodos(); save();
      },800);
    };
    li.onmouseup=li.ontouchend=()=>clearTimeout(timer);

    list.appendChild(li);
  });
}

function addTodo(){
  const v=todoInput.value.trim();
  if(!v) return;
  todos.push({text:v,done:false});
  todoInput.value="";
  renderTodos(); save();
}

function renderChat(){
  chat.innerHTML="";
  chatHistory.forEach(m=>{
    chat.innerHTML+=`<div class="${m.from}">${m.text}</div>`;
  });
  chat.scrollTop=chat.scrollHeight;
}

renderTodos(); renderChat(); save();

// ================= IA =================

function runAI(){
  const input=document.getElementById("aiInput");
  const cat=document.getElementById("aiCategory");
  const q=input.value.trim().toLowerCase();
  if(!q) return;

  points+=Math.max(1,Math.floor(q.length/6));
  save();

  let r="", c="";

  if(q.includes("recette") && q.includes("pÃ¢tes")){
    c="ğŸ Recette";
    r=
"Recette des pÃ¢tes ğŸ\n\n"+
"IngrÃ©dients :\n- PÃ¢tes\n- Sel\n- Sauce tomate\n\n"+
"Ã‰tapes :\n1ï¸âƒ£ Eau bouillante salÃ©e\n2ï¸âƒ£ Cuire 8â€“10 min\n3ï¸âƒ£ Ã‰goutter\n4ï¸âƒ£ Ajouter la sauce";
  }
  else if(q.includes("recette") && q.includes("riz")){
    c="ğŸš Recette";
    r=
"Recette du riz ğŸš\n\n"+
"IngrÃ©dients :\n- Riz\n- Eau\n- Sel\n\n"+
"Ã‰tapes :\n1ï¸âƒ£ Rincer le riz\n2ï¸âƒ£ 2x eau\n3ï¸âƒ£ Cuire 12 min";
  }
  else if(q.includes("omelette")){
    c="ğŸ³ Recette";
    r=
"Omelette simple ğŸ³\n\n"+
"IngrÃ©dients : Å“ufs, sel\n\n"+
"Ã‰tapes : battre, cuire 3 min";
  }
  else if(q.includes("repas")){
    c="ğŸ½ï¸ IdÃ©es de repas";
    r=
"- Riz + poulet\n- Omelette + salade\n- PÃ¢tes + lÃ©gumes\n- Sandwich maison";
  }
  else if(q.startsWith("c'est quoi")||q.startsWith("câ€™est quoi")){
    c="ğŸ“– DÃ©finition";
    r="Câ€™est une explication simple pour comprendre un mot ou une idÃ©e.";
  }
  else if(q.includes("stress")||q.includes("fatigu")){
    c="ğŸ’™ Aide";
    r="Respire lentement, bois de lâ€™eau, repose-toi. Tu gÃ¨res ğŸ‘";
  }
  else{
    c="ğŸ¤– Aide gÃ©nÃ©rale";
    r="Je peux aider pour recettes, repas, dÃ©finitions et conseils.";
  }

  chatHistory.push({from:"user",text:"ğŸ‘¤ "+input.value});
  chatHistory.push({from:"ai",text:"ğŸ¤– "+r});
  cat.textContent=c;
  input.value="";
  renderChat(); save();
}
</script>
</body>
</html>

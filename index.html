<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Daily Life Dashboard</title>

<!-- IcÃ´ne (quasi-PWA) -->
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸš€%3C/text%3E%3C/svg%3E">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}
html,body{width:100%;overflow-x:hidden}
body{min-height:100vh;color:#fff;padding:10px}

/* THEMES */
body.green{background:linear-gradient(180deg,#064e3b,#042f2e)}
body.red{background:linear-gradient(180deg,#7f1d1d,#450a0a)}
body.blue{background:linear-gradient(180deg,#1e3a8a,#020617)}
body.rose{background:linear-gradient(180deg,#9d174d,#4a044e)}
body.violet{background:linear-gradient(180deg,#5b21b6,#2e1065)}

/* CONTAINER */
.container{max-width:420px;margin:auto}

/* HEADER */
header{
display:flex;justify-content:space-between;align-items:center;
margin-bottom:14px;padding-top:6px
}
header h1{font-size:20px}
.menu-btn{font-size:24px;cursor:pointer}

/* CARDS (COMME AU DÃ‰BUT) */
.card{
background:rgba(255,255,255,.12);
backdrop-filter:blur(14px);
border-radius:18px;
padding:14px;
margin-bottom:12px;
box-shadow:
inset 0 0 0 1px rgba(255,255,255,.15),
0 8px 25px rgba(0,0,0,.25)
}

/* FORM */
input,select,button{
width:100%;padding:10px;border:none;border-radius:12px;margin-top:6px
}
input,select{background:rgba(255,255,255,.9)}
button{background:rgba(255,255,255,.2);color:#fff;font-weight:bold}

/* LISTS */
ul{list-style:none;margin-top:6px}
li{
background:rgba(255,255,255,.15);
padding:8px;border-radius:10px;margin-top:6px;
user-select:none
}
li.done{text-decoration:line-through;opacity:.6}

/* SIDEBAR */
#sidebar{
position:fixed;top:0;left:-100%;
width:75%;max-width:280px;height:100%;
background:#0f172a;padding:15px;
transition:.3s;z-index:10
}
#sidebar.active{left:0}
#sidebar h3{margin-bottom:8px}
#sidebar .item{
display:flex;justify-content:space-between;align-items:center;
padding:8px;border-bottom:1px solid #333;cursor:pointer
}
#sidebar .del{opacity:.6;font-size:14px}

/* CHAT */
#chat{
display:none;position:fixed;top:0;left:0;
width:100%;height:100%;background:#020617;z-index:9;
flex-direction:column
}
#messages{flex:1;overflow-y:auto;padding:10px}
.msg{margin-bottom:6px}
.user{color:#38bdf8}
.ai{color:#a7f3d0}
</style>
</head>

<body class="green">

<!-- SIDEBAR -->
<div id="sidebar">
<h3>ğŸ’¬ Conversations</h3>
<div class="item" onclick="newConversation()">â• Nouvelle</div>
<div id="convList"></div>
<div class="item" onclick="goHome()">ğŸ  Accueil</div>
</div>

<!-- CHAT -->
<div id="chat">
<header>
<h1 id="chatTitle">Conversation</h1>
<span class="menu-btn" onclick="toggleMenu()">â˜°</span>
</header>
<div id="messages"></div>
<input id="chatInput" placeholder="Ã‰cris..." onkeydown="if(event.key==='Enter')sendMsg()">
</div>

<div class="container" id="main">

<header>
<h1>Daily Life</h1>
<span class="menu-btn" onclick="toggleMenu()">â˜°</span>
</header>

<div class="card">
<h3>ğŸ¨ ThÃ¨me</h3>
<select onchange="changeTheme(this.value)">
<option value="green">Vert</option>
<option value="red">Rouge</option>
<option value="blue">Bleu</option>
<option value="rose">Rose</option>
<option value="violet">Violet</option>
</select>
</div>

<div class="card">
<h3>ğŸ“Š Stats</h3>
<p>Points : <span id="points">0</span></p>
<p>Niveau : <span id="level">1</span></p>
</div>

<div class="card">
<h3>âœ… To-Do</h3>
<input id="taskInput" placeholder="Nouvelle tÃ¢che">
<button onclick="addTask()">Ajouter</button>
<ul id="tasks"></ul>
</div>

<div class="card">
<h3>ğŸ§‘â€ğŸ³ Menu semaine</h3>
<button onclick="generateMenu()">GÃ©nÃ©rer</button>
<ul id="menu"></ul>
</div>

<div class="card">
<h3>ğŸ›’ Courses</h3>
<button onclick="generateCourses()">Depuis menu</button>
<ul id="courses"></ul>
</div>

<div class="card">
<h3>â° Rappel</h3>
<input type="time" id="alarm">
<button onclick="setAlarm()">Activer</button>
</div>

</div>

<script>
/* ===== DATA ===== */
let tasks=JSON.parse(localStorage.tasks||"[]")
let menu=JSON.parse(localStorage.menu||"[]")
let courses=JSON.parse(localStorage.courses||"[]")
let points=Number(localStorage.points||0)

let conversations=JSON.parse(localStorage.conversations||"[]")
let currentConv=null

const meals=["PÃ¢tes","Pizza","Riz","Poulet","Salade","Burger","Poisson","Tacos","Curry","Soupe"]

/* ===== SAVE & RENDER ===== */
function saveAll(){
localStorage.tasks=JSON.stringify(tasks)
localStorage.menu=JSON.stringify(menu)
localStorage.courses=JSON.stringify(courses)
localStorage.points=points
localStorage.conversations=JSON.stringify(conversations)
render()
}

function render(){
tasksEl.innerHTML=""
tasks.forEach((t,i)=>{
let li=document.createElement("li")
li.textContent=t.t
if(t.d)li.classList.add("done")
li.onclick=()=>{t.d=!t.d;points+=5;saveAll()}
tasksEl.appendChild(li)
})

menuEl.innerHTML=""
menu.forEach(m=>menuEl.innerHTML+=`<li>${m}</li>`)

coursesEl.innerHTML=""
courses.forEach((c,i)=>{
let li=document.createElement("li")
li.textContent=c
let timer
li.addEventListener("touchstart",()=>timer=setTimeout(()=>{courses.splice(i,1);saveAll()},600))
li.addEventListener("touchend",()=>clearTimeout(timer))
coursesEl.appendChild(li)
})

pointsEl.textContent=points
levelEl.textContent=Math.floor(points/50)+1

renderConvList()
}

/* ===== TASKS / MENU ===== */
function addTask(){
if(taskInput.value){
tasks.push({t:taskInput.value,d:false})
taskInput.value=""
saveAll()
}}
function generateMenu(){
menu=[]
for(let i=0;i<7;i++) menu.push(meals[Math.floor(Math.random()*meals.length)])
saveAll()
}
function generateCourses(){
courses=[...new Set(menu)]
saveAll()
}
function changeTheme(t){document.body.className=t}

/* ===== SIDEBAR ===== */
function toggleMenu(){sidebar.classList.toggle("active")}
function goHome(){
chat.style.display="none"
main.style.display="block"
sidebar.classList.remove("active")
}

/* ===== CHAT & HISTORY ===== */
function newConversation(){
const id=Date.now()
conversations.unshift({id,title:"Conversation "+(conversations.length+1),msgs:[]})
currentConv=id
openChat()
}

function renderConvList(){
convList.innerHTML=""
conversations.forEach(c=>{
let d=document.createElement("div")
d.className="item"
d.innerHTML=`<span>${c.title}</span><span class="del">ğŸ—‘ï¸</span>`
d.onclick=(e)=>{
if(e.target.classList.contains("del")){
conversations=conversations.filter(x=>x.id!==c.id)
if(currentConv===c.id) goHome()
saveAll()
}else{
currentConv=c.id
openChat()
}
}
convList.appendChild(d)
})
}

function openChat(){
chat.style.display="flex"
main.style.display="none"
sidebar.classList.remove("active")
renderMessages()
}

function renderMessages(){
messages.innerHTML=""
const conv=conversations.find(c=>c.id===currentConv)
if(!conv)return
chatTitle.textContent=conv.title
conv.msgs.forEach(m=>{
messages.innerHTML+=`<div class="msg ${m.w}">${m.w==="user"?"ğŸ‘¤":"ğŸ¤–"} ${m.t}</div>`
})
messages.scrollTop=messages.scrollHeight
}

function sendMsg(){
const t=chatInput.value.trim()
if(!t||!currentConv)return
const conv=conversations.find(c=>c.id===currentConv)
conv.msgs.push({w:"user",t})
chatInput.value=""
setTimeout(()=>{
conv.msgs.push({w:"ai",t:fakeAI(t)})
saveAll()
renderMessages()
},500)
saveAll()
}

function fakeAI(t){
t=t.toLowerCase()
if(t.includes("recette")) return "ğŸ³ Essaie un curry de lÃ©gumes simple."
if(t.includes("menu")) return "ğŸ“… Je peux te proposer un menu Ã©quilibrÃ©."
if(t.includes("rappel")) return "â° Dis-moi lâ€™heure et je te rappellerai."
return "ğŸ¤– Je suis lÃ  pour tâ€™aider au quotidien."
}

/* ===== ALARM ===== */
function setAlarm(){
Notification.requestPermission()
const time=alarm.value
setInterval(()=>{
const now=new Date().toTimeString().slice(0,5)
if(now===time) new Notification("â° Rappel !")
},30000)
}

render()
</script>

</body>
  </html>

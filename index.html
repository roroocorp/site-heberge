<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Login - Site HÃ©bergÃ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 28px;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .header p {
            color: #6b7280;
            font-size: 14px;
        }

        .login-section {
            display: none;
        }

        .login-section.active {
            display: block;
        }

        .discord-login-btn {
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, #5865F2 0%, #4752C4 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(88, 101, 242, 0.4);
        }

        .discord-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(88, 101, 242, 0.6);
            background: linear-gradient(135deg, #6B78FF 0%, #5562D5 100%);
        }

        .discord-login-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(88, 101, 242, 0.4);
        }

        .discord-login-btn svg {
            width: 20px;
            height: 20px;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .user-section {
            display: none;
        }

        .user-section.active {
            display: block;
        }

        .user-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #f0f2f5 100%);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            border: 4px solid #5865F2;
            object-fit: cover;
            background: #e5e7eb;
        }

        .user-info h2 {
            font-size: 22px;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .user-info p {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .user-details {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
        }

        .user-details-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .user-details-item:last-child {
            border-bottom: none;
        }

        .user-details-item label {
            color: #6b7280;
            font-weight: 500;
        }

        .user-details-item value {
            color: #1f2937;
            font-family: 'Courier New', monospace;
            word-break: break-all;
        }

        .error-message {
            display: none;
            background: #fee2e2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #dc2626;
        }

        .error-message.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .error-message strong {
            display: block;
            margin-bottom: 5px;
        }

        .success-message {
            display: none;
            background: #dcfce7;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #16a34a;
        }

        .success-message.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logout-btn {
            width: 100%;
            padding: 12px 20px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .logout-btn:active {
            transform: translateY(0);
        }

        .divider {
            width: 100%;
            height: 1px;
            background: #e5e7eb;
            margin: 20px 0;
        }

        .token-section {
            background: #f9fafb;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .token-section h3 {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .token-value {
            background: white;
            padding: 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            word-break: break-all;
            color: #374151;
            max-height: 100px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
        }

        @media (max-width: 480px) {
            .container {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .discord-login-btn {
                padding: 12px 16px;
                font-size: 15px;
            }

            .user-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ® Discord Login</h1>
            <p>Secure authentication with Discord</p>
        </div>

        <!-- Error Message -->
        <div class="error-message" id="errorMessage"></div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage"></div>

        <!-- Login Section -->
        <div class="login-section active" id="loginSection">
            <button class="discord-login-btn" id="discordLoginBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.3671a19.8062 19.8062 0 00-4.885-1.515.0741.0741 0 00-.0785.0371c-.211.3748-.445.8635-.609 1.25a18.27 18.27 0 00-5.487 0c-.164-.3865-.398-.8752-.609-1.25a.077.077 0 00-.0785-.037 19.7896 19.7896 0 00-4.885 1.515.0699.0699 0 00-.0321.0277C1.75 8.068 1.1236 11.632 1.9805 15.064a.0796.0796 0 00.0404.0557 19.9331 19.9331 0 005.992 3.03.0791.0791 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9885a.0771.0771 0 00-.042-.1061 13.1349 13.1349 0 01-1.872-.892.077.077 0 01-.0076-.1277c.1255-.0941.2513-.1923.3718-.2914a.0705.0705 0 01.0734-.0096c3.928 1.793 8.18 1.793 12.062 0a.0713.0713 0 01.0739.0091c.1205.991.2462 1.993.3728.2922a.0769.0769 0 00-.042.1067 12.2640 12.2640 0 01-1.873.8924.077.077 0 00-.0097.1277 14.9484 14.9484 0 001.226 1.9885.0771.0771 0 00.0842.0274 19.8695 19.8695 0 005.992-3.03.0771.0771 0 00.0405-.0552c.837-3.436.151-6.41-1.886-9.474a.061.061 0 00-.0312-.0286zM8.02 12.6775c-1.063 0-1.938-.969-1.938-2.159 0-1.192.859-2.159 1.938-2.159 1.087 0 1.938.979 1.938 2.159 0 1.19-.859 2.159-1.938 2.159zm7.952 0c-1.063 0-1.938-.969-1.938-2.159 0-1.192.859-2.159 1.938-2.159 1.087 0 1.938.979 1.938 2.159 0 1.19-.851 2.159-1.938 2.159z"/>
                </svg>
                Login with Discord
            </button>
        </div>

        <!-- User Section -->
        <div class="user-section" id="userSection">
            <div class="user-card">
                <img id="userAvatar" class="user-avatar" alt="User Avatar">
                <div class="user-info">
                    <h2 id="userName">User Name</h2>
                    <p id="userEmail">user@example.com</p>
                </div>
            </div>

            <div class="user-details">
                <div class="user-details-item">
                    <label>User ID:</label>
                    <value id="userId">-</value>
                </div>
                <div class="user-details-item">
                    <label>Username:</label>
                    <value id="userUsername">-</value>
                </div>
                <div class="user-details-item">
                    <label>Status:</label>
                    <value id="userStatus" style="color: #10b981; font-weight: 600;">âœ“ Authenticated</value>
                </div>
            </div>

            <div class="token-section">
                <h3>Access Token</h3>
                <div class="token-value" id="tokenValue">No token available</div>
            </div>

            <div class="divider"></div>

            <button class="logout-btn" id="logoutBtn">Logout</button>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            CLIENT_ID: 'YOUR_DISCORD_CLIENT_ID', // Replace with your Discord Client ID
            REDIRECT_URI: window.location.origin,
            SCOPES: ['identify', 'email'],
            OAUTH_URL: 'https://discord.com/api/oauth2/authorize'
        };

        // State Management
        const state = {
            user: null,
            token: null,
            error: null
        };

        // DOM Elements
        const elements = {
            discordLoginBtn: document.getElementById('discordLoginBtn'),
            logoutBtn: document.getElementById('logoutBtn'),
            loginSection: document.getElementById('loginSection'),
            userSection: document.getElementById('userSection'),
            errorMessage: document.getElementById('errorMessage'),
            successMessage: document.getElementById('successMessage'),
            userAvatar: document.getElementById('userAvatar'),
            userName: document.getElementById('userName'),
            userEmail: document.getElementById('userEmail'),
            userId: document.getElementById('userId'),
            userUsername: document.getElementById('userUsername'),
            userStatus: document.getElementById('userStatus'),
            tokenValue: document.getElementById('tokenValue')
        };

        // Initialize
        function init() {
            elements.discordLoginBtn.addEventListener('click', handleLogin);
            elements.logoutBtn.addEventListener('click', handleLogout);
            checkStoredAuth();
            handleOAuthCallback();
        }

        // Handle Login
        function handleLogin() {
            try {
                const params = new URLSearchParams({
                    client_id: CONFIG.CLIENT_ID,
                    redirect_uri: CONFIG.REDIRECT_URI,
                    response_type: 'code',
                    scope: CONFIG.SCOPES.join(' '),
                    prompt: 'consent'
                });

                if (CONFIG.CLIENT_ID === 'YOUR_DISCORD_CLIENT_ID') {
                    showError('Discord Client ID not configured', 'Please set your Discord Client ID in the configuration.');
                    return;
                }

                window.location.href = `${CONFIG.OAUTH_URL}?${params.toString()}`;
            } catch (err) {
                showError('Login Failed', err.message);
            }
        }

        // Handle OAuth Callback
        function handleOAuthCallback() {
            const params = new URLSearchParams(window.location.search);
            const code = params.get('code');
            const error = params.get('error');

            if (error) {
                showError('Authentication Failed', `Discord returned an error: ${error}`);
                return;
            }

            if (code) {
                setLoadingState(true);
                exchangeCodeForToken(code);
            }
        }

        // Exchange authorization code for token
        async function exchangeCodeForToken(code) {
            try {
                // Note: This should be done on your backend for security
                // This is a simplified frontend example
                showSuccess('Authorization Code Received', 'Code: ' + code.substring(0, 20) + '...');
                state.token = code;
                localStorage.setItem('discord_auth_code', code);
                
                // Clean up URL
                window.history.replaceState({}, document.title, window.location.pathname);
                
                // Display user mock data (in production, fetch real user data from backend)
                displayMockUserData();
                setLoadingState(false);
            } catch (err) {
                showError('Token Exchange Failed', err.message);
                setLoadingState(false);
            }
        }

        // Display Mock User Data (for demonstration)
        function displayMockUserData() {
            state.user = {
                id: '123456789',
                username: 'DiscordUser',
                email: 'user@discord.com',
                avatar: 'https://cdn.discordapp.com/embed/avatars/0.png'
            };

            displayUserInfo();
        }

        // Display User Information
        function displayUserInfo() {
            if (!state.user) return;

            elements.userAvatar.src = state.user.avatar;
            elements.userAvatar.alt = state.user.username;
            elements.userName.textContent = state.user.username;
            elements.userEmail.textContent = state.user.email;
            elements.userId.textContent = state.user.id;
            elements.userUsername.textContent = state.user.username;
            elements.tokenValue.textContent = state.token || 'No token available';

            toggleSections(false);
            localStorage.setItem('discord_user', JSON.stringify(state.user));
            localStorage.setItem('discord_token', state.token);
        }

        // Handle Logout
        function handleLogout() {
            try {
                state.user = null;
                state.token = null;
                localStorage.removeItem('discord_user');
                localStorage.removeItem('discord_token');
                localStorage.removeItem('discord_auth_code');
                toggleSections(true);
                showSuccess('Logged Out', 'You have been successfully logged out.');
                
                setTimeout(() => {
                    clearMessages();
                }, 3000);
            } catch (err) {
                showError('Logout Failed', err.message);
            }
        }

        // Check for Stored Authentication
        function checkStoredAuth() {
            try {
                const storedUser = localStorage.getItem('discord_user');
                const storedToken = localStorage.getItem('discord_token');

                if (storedUser && storedToken) {
                    state.user = JSON.parse(storedUser);
                    state.token = storedToken;
                    displayUserInfo();
                }
            } catch (err) {
                console.error('Error checking stored auth:', err);
                localStorage.removeItem('discord_user');
                localStorage.removeItem('discord_token');
            }
        }

        // UI Helper Functions
        function toggleSections(showLogin) {
            if (showLogin) {
                elements.loginSection.classList.add('active');
                elements.userSection.classList.remove('active');
            } else {
                elements.loginSection.classList.remove('active');
                elements.userSection.classList.add('active');
            }
        }

        function setLoadingState(isLoading) {
            if (isLoading) {
                elements.discordLoginBtn.disabled = true;
                elements.discordLoginBtn.innerHTML = '<div class="loading-spinner"></div> Processing...';
            } else {
                elements.discordLoginBtn.disabled = false;
                elements.discordLoginBtn.innerHTML = '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.3671a19.8062 19.8062 0 00-4.885-1.515.0741.0741 0 00-.0785.0371c-.211.3748-.445.8635-.609 1.25a18.27 18.27 0 00-5.487 0c-.164-.3865-.398-.8752-.609-1.25a.077.077 0 00-.0785-.037 19.7896 19.7896 0 00-4.885 1.515.0699.0699 0 00-.0321.0277C1.75 8.068 1.1236 11.632 1.9805 15.064a.0796.0796 0 00.0404.0557 19.9331 19.9331 0 005.992 3.03.0791.0791 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9885a.0771.0771 0 00-.042-.1061 13.1349 13.1349 0 01-1.872-.892.077.077 0 01-.0076-.1277c.1255-.0941.2513-.1923.3718-.2914a.0705.0705 0 01.0734-.0096c3.928 1.793 8.18 1.793 12.062 0a.0713.0713 0 01.0739.0091c.1205.991.2462 1.993.3728.2922a.0769.0769 0 00-.042.1067 12.2640 12.2640 0 01-1.873.8924.077.077 0 00-.0097.1277 14.9484 14.9484 0 001.226 1.9885.0771.0771 0 00.0842.0274 19.8695 19.8695 0 005.992-3.03.0771.0771 0 00.0405-.0552c.837-3.436.151-6.41-1.886-9.474a.061.061 0 00-.0312-.0286zM8.02 12.6775c-1.063 0-1.938-.969-1.938-2.159 0-1.192.859-2.159 1.938-2.159 1.087 0 1.938.979 1.938 2.159 0 1.19-.859 2.159-1.938 2.159zm7.952 0c-1.063 0-1.938-.969-1.938-2.159 0-1.192.859-2.159 1.938-2.159 1.087 0 1.938.979 1.938 2.159 0 1.19-.851 2.159-1.938 2.159z"/></svg> Login with Discord';
            }
        }

        function showError(title, message) {
            state.error = { title, message };
            elements.errorMessage.innerHTML = `<strong>${escapeHtml(title)}</strong>${escapeHtml(message)}`;
            elements.errorMessage.classList.add('active');
            elements.successMessage.classList.remove('active');
        }

        function showSuccess(title, message) {
            elements.successMessage.innerHTML = `<strong>${escapeHtml(title)}</strong>${escapeHtml(message)}`;
            elements.successMessage.classList.add('active');
            elements.errorMessage.classList.remove('active');
        }

        function clearMessages() {
            elements.errorMessage.classList.remove('active');
            elements.successMessage.classList.remove('active');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Start the application
        init();
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Daily Life Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{--bg:#0f172a;--card:#1e293b;--text:#e5e7eb;--primary:#3b82f6}
body.red{--bg:#7f1d1d;--card:#991b1b;--text:#fff;--primary:#ef4444}
body.blue{--bg:#0f172a;--card:#1e293b;--text:#e5e7eb;--primary:#3b82f6}
body.green{--bg:#052e16;--card:#064e3b;--text:#ecfdf5;--primary:#22c55e}

body{margin:0;font-family:Arial;background:var(--bg);color:var(--text)}
header{background:var(--primary);color:#fff;padding:15px;text-align:center}
main{max-width:600px;margin:auto;padding:10px}
.card{background:var(--card);padding:15px;border-radius:12px;margin-bottom:15px}
input,textarea,button,select{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:none}
button{background:var(--primary);color:#fff;font-weight:bold}
.chat{background:#00000030;padding:10px;border-radius:10px;max-height:220px;overflow-y:auto}
.msg{margin-bottom:6px}
.user{color:#93c5fd}
.ai{color:#86efac}
.category{font-size:13px;opacity:.8}
.badge{background:gold;color:#000;padding:5px 10px;border-radius:8px;margin:4px;display:inline-block}
.menu-day,.item{padding:6px;border-bottom:1px solid #ffffff20;cursor:pointer}
</style>
</head>

<body class="blue">
<header>
<h1>ğŸ¤– IA Daily Assistant</h1>
<p>MÃ©moire â€¢ Menu â€¢ Courses â€¢ Recettes</p>
</header>

<main>

<div class="card">
<select id="theme">
<option value="blue">Bleu</option>
<option value="red">Rouge</option>
<option value="green">Vert</option>
</select>
</div>

<div class="card">
<p>â­ Points : <span id="points">0</span></p>
<p>ğŸ® Niveau : <span id="level">1</span></p>
<div id="badges"></div>
</div>

<div class="card">
<h2>ğŸ§  IA intelligente</h2>
<textarea id="aiInput" placeholder="Jâ€™ai faim / recette poulet / aide..."></textarea>
<button onclick="runAI()">Envoyer</button>
<div class="category" id="cat"></div>
<div class="chat" id="chat"></div>
</div>

<div class="card">
<h2>ğŸ³ Menu de la semaine</h2>
<button onclick="generateMenu()">GÃ©nÃ©rer menu</button>
<div id="menu"></div>
</div>

<div class="card">
<h2>ğŸ›’ Liste de courses</h2>
<button onclick="generateGroceries()">GÃ©nÃ©rer liste</button>
<div id="groceries"></div>
</div>

</main>

<script>
let chat=JSON.parse(localStorage.getItem("chat")||"[]");
let menu=JSON.parse(localStorage.getItem("menu")||"[]");
let groceries=JSON.parse(localStorage.getItem("groceries")||"[]");
let memory=JSON.parse(localStorage.getItem("memory")||"{}");
let points=+localStorage.getItem("points")||0;
let level=+localStorage.getItem("level")||1;

const recipes=[
{n:"PÃ¢tes bolognaise",i:["pÃ¢tes","viande","tomate"]},
{n:"PÃ¢tes carbonara",i:["pÃ¢tes","Å“ufs","lardons"]},
{n:"Riz poulet",i:["riz","poulet"]},
{n:"Poulet rÃ´ti",i:["poulet","Ã©pices"]},
{n:"Omelette",i:["Å“ufs"]},
{n:"Salade",i:["salade","tomate"]},
{n:"Burger",i:["pain","viande"]},
{n:"Pizza",i:["pÃ¢te","fromage","tomate"]},
{n:"Soupe",i:["lÃ©gumes"]},
{n:"CrÃªpes",i:["farine","Å“ufs","lait"]}
];

function save(){
localStorage.setItem("chat",JSON.stringify(chat));
localStorage.setItem("menu",JSON.stringify(menu));
localStorage.setItem("groceries",JSON.stringify(groceries));
localStorage.setItem("memory",JSON.stringify(memory));
localStorage.setItem("points",points);
localStorage.setItem("level",level);
document.getElementById("points").textContent=points;
document.getElementById("level").textContent=level;
renderBadges();
}

function renderBadges(){
const b=document.getElementById("badges");
b.innerHTML="";
if(points>=10)b.innerHTML+='<span class="badge">ğŸ”¥ DÃ©butant</span>';
if(points>=30)b.innerHTML+='<span class="badge">ğŸ’ª Actif</span>';
if(points>=60)b.innerHTML+='<span class="badge">ğŸ† Expert</span>';
}

function renderChat(){
const c=document.getElementById("chat");
c.innerHTML="";
chat.forEach((m,i)=>{
const d=document.createElement("div");
d.className="msg "+m.from;
d.textContent=m.text;
let t;
d.onmousedown=d.ontouchstart=()=>t=setTimeout(()=>{chat.splice(i,1);save();renderChat()},800);
d.onmouseup=d.ontouchend=()=>clearTimeout(t);
c.appendChild(d);
});
c.scrollTop=c.scrollHeight;
}

function random(arr){return arr[Math.floor(Math.random()*arr.length)]}

function remember(key){memory[key]=(memory[key]||0)+1;}

function runAI(){
const input=document.getElementById("aiInput");
const q=input.value.trim().toLowerCase();
if(!q)return;

points+=Math.max(1,Math.floor(q.length/6));
let r="",c="";

if(/faim|repas|menu/.test(q)){
c="ğŸ½ï¸ Repas";
const fav=Object.keys(memory).sort((a,b)=>memory[b]-memory[a])[0];
const choice=fav?recipes.find(x=>x.n.toLowerCase().includes(fav))||random(recipes):random(recipes);
r="Je te conseille : "+choice.n;
remember(choice.n.split(" ")[0].toLowerCase());
}
else if(/recette|cuisine/.test(q)){
c="ğŸ§‘â€ğŸ³ Recette";
const rec=random(recipes);
r="Recette "+rec.n+"\nIngrÃ©dients : "+rec.i.join(", ");
remember(rec.n.split(" ")[0].toLowerCase());
}
else{
c="ğŸ¤– GÃ©nÃ©ral";
r="Je peux tâ€™aider Ã  manger, organiser et cuisiner.";
}

chat.push({from:"user",text:"ğŸ‘¤ "+input.value});
chat.push({from:"ai",text:"ğŸ¤– "+r});
document.getElementById("cat").textContent=c;
input.value="";
save();renderChat();
}

function generateMenu(){
const days=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];
menu=days.map(d=>d+" : "+random(recipes).n);
renderMenu();save();
}

function renderMenu(){
const m=document.getElementById("menu");
m.innerHTML="";
menu.forEach(l=>{
const d=document.createElement("div");
d.className="menu-day";
d.textContent=l;
m.appendChild(d);
});
}

function generateGroceries(){
let set=new Set();
menu.forEach(m=>{
const name=m.split(": ")[1];
const r=recipes.find(x=>x.n===name);
if(r)r.i.forEach(i=>set.add(i));
});
groceries=[...set];
renderGroceries();save();
}

function renderGroceries(){
const g=document.getElementById("groceries");
g.innerHTML="";
groceries.forEach((it,i)=>{
const d=document.createElement("div");
d.className="item";
d.textContent="ğŸ›’ "+it;
let t;
d.onmousedown=d.ontouchstart=()=>t=setTimeout(()=>{groceries.splice(i,1);save();renderGroceries()},800);
d.onmouseup=d.ontouchend=()=>clearTimeout(t);
g.appendChild(d);
});
}

document.getElementById("theme").onchange=e=>document.body.className=e.target.value;

renderChat();renderMenu();renderGroceries();save();
</script>
</body>
  </html>

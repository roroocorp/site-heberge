<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Assistant Quotidien Ultra</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --blue:#3b82f6; --red:#ef4444; --green:#22c55e;
  --purple:#a855f7; --orange:#f97316; --pink:#ec4899;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:Arial,sans-serif;
  transition:background 0.5s;
  background:var(--pink);
  color:white;
}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:10px 15px;
  position:sticky;top:0;z-index:10;
  background:rgba(0,0,0,0.05);
}
main{
  max-width:900px;margin:auto;padding:10px;
  display:flex;flex-direction:column;gap:10px;
}
.card{
  padding:15px;border-radius:12px;background:rgba(255,255,255,0.9);
  color:black;box-shadow:0 4px 6px rgba(0,0,0,0.1);
  opacity:0;transform:translateY(20px);animation:fadeIn 0.5s forwards;
  transition:all 0.3s;
}
@keyframes fadeIn{to{opacity:1;transform:translateY(0);}}
.fadeOut{opacity:0 !important;transform:translateY(-20px);transition:all 0.3s;}
input,textarea,select,button{
  width:100%;padding:10px;margin-top:8px;border-radius:8px;border:none;
}
button{background:rgba(0,0,0,0.1);color:black;font-weight:bold;cursor:pointer;transition:0.3s;}
button:hover{opacity:0.85;}
ul{padding:0;list-style:none;max-height:250px;overflow-y:auto;scroll-behavior:smooth;}
li{padding:6px;margin-bottom:4px;border-radius:8px;background:#ffffff70;cursor:pointer;transition:all 0.3s;}
li.done{text-decoration:line-through;opacity:.6;}
li:hover{transform:scale(1.02);}
#clock{font-weight:bold;margin-left:10px;}
#aiMenu{cursor:pointer;font-weight:bold;margin-left:10px;}

/* Sidebar */
#aiSidebar{
  position:fixed;top:0;left:-400px;width:400px;height:100%;
  background:white;color:black;
  box-shadow:2px 0 15px rgba(0,0,0,0.3);
  transition:left 0.5s ease;
  z-index:100;padding:10px;overflow-y:auto;
}
#aiSidebar.show{left:0;}
#aiSidebar h2{margin-top:0;}
#aiSidebar ul{list-style:none;padding:0;}
#aiSidebar li{padding:6px;margin-bottom:4px;border-radius:6px;background:#f1f5f9;cursor:pointer;transition:all 0.3s;}
#aiSidebar li:hover{background:#e2e8f0;}

/* Chat */
#chatBox{
  display:none;position:fixed;bottom:10px;left:420px;right:10px;
  max-width:600px;background:white;border-radius:12px;padding:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  transition:all 0.5s ease-in-out;
}
#chatBox.show{display:block;}
.chat{max-height:220px;overflow-y:auto;scroll-behavior:smooth;margin-bottom:10px;padding:5px;border:1px solid #ccc;border-radius:10px;background:#f0f0f0;transition:all 0.3s;}
.msg{margin-bottom:6px;opacity:0;transform:translateY(20px);transition:all 0.3s;}
.msg.show{opacity:1;transform:translateY(0);}
.user{color:#2563eb;}
.ai{color:#16a34a;}
.category{font-size:13px;opacity:.8;}
.badge{display:inline-block;background:gold;color:black;padding:5px 10px;border-radius:8px;margin:4px;}
#searchInput{padding:8px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc;}
</style>
</head>
<body>

<header>
<div>
<h1 id="title">ü§ñ Assistant Quotidien Ultra</h1>
<p id="subtitle">T√¢ches ‚Ä¢ Menu ‚Ä¢ IA ‚Ä¢ Recettes</p>
</div>
<div style="display:flex;align-items:center;">
<input id="searchInput" placeholder="üîç Rechercher t√¢ches, repas ou ingr√©dients" style="width:150px;">
<div id="clock"></div>
<div id="aiMenu">‚ãÆ</div>
</div>
</header>

<div id="aiSidebar">
<h2>Chat IA</h2>
<button onclick="newChat()">Nouvelle conversation</button>
<h3>Historique</h3>
<ul id="chatHistory"></ul>
</div>

<main>
<div class="card">
<select id="theme">
<option value="blue">Bleu</option>
<option value="red">Rouge</option>
<option value="green">Vert</option>
<option value="purple">Violet</option>
<option value="orange">Orange</option>
<option value="pink">Rose</option>
</select>
<select id="lang">
<option value="fr">Fran√ßais</option>
<option value="en">English</option>
<option value="de">Deutsch</option>
</select>
</div>

<div class="card">
<p>‚≠ê Points : <span id="points">0</span></p>
<p>üéÆ Niveau : <span id="level">1</span></p>
<div id="badges"></div>
</div>

<div class="card">
<h2>‚úÖ T√¢ches</h2>
<input id="todoInput" placeholder="√âcris une t√¢che">
<button onclick="addTodo()">Ajouter</button>
<ul id="list"></ul>
</div>

<div class="card">
<h2>üç≥ Menu de la semaine</h2>
<button onclick="generateMenu()">G√©n√©rer menu</button>
<ul id="menu"></ul>
</div>

<div class="card">
<h2>üõí Liste de courses</h2>
<button onclick="generateGroceries()">G√©n√©rer liste</button>
<ul id="groceries"></ul>
</div>

<div class="card" id="chatBox">
<div class="chat" id="chat"></div>
<textarea id="aiInput" placeholder="Pose ta question..."></textarea>
<button onclick="runAI()">Envoyer</button>
<div class="category" id="aiCategory"></div>
</div>

<div class="card">
<h2>‚è∞ R√©veil / Rappel</h2>
<input type="time" id="alarmTime">
<button onclick="setAlarm()">Programmer le r√©veil</button>
<p id="alarmMsg"></p>
</div>
</main>

<script>
// DATA
let todos=JSON.parse(localStorage.getItem("todos")||"[]");
let menu=JSON.parse(localStorage.getItem("menu")||"[]");
let groceries=JSON.parse(localStorage.getItem("groceries")||"[]");
let chat=JSON.parse(localStorage.getItem("chat")||"[]");
let history=JSON.parse(localStorage.getItem("history")||"[]");
let points=+localStorage.getItem("points")||0;
let level=+localStorage.getItem("level")||1;

// LANGUES
const texts={fr:{title:"ü§ñ Assistant Quotidien Ultra",sub:"T√¢ches ‚Ä¢ Menu ‚Ä¢ IA ‚Ä¢ Recettes",todo:"√âcris une t√¢che"},
en:{title:"ü§ñ Daily Assistant",sub:"Tasks ‚Ä¢ Menu ‚Ä¢ AI ‚Ä¢ Recipes",todo:"Write a task"},
de:{title:"ü§ñ T√§glicher Assistent",sub:"Aufgaben ‚Ä¢ Men√º ‚Ä¢ KI ‚Ä¢ Rezepte",todo:"Aufgabe eingeben"}};
const langSel=document.getElementById("lang"); const savedLang=localStorage.getItem("lang")||"fr"; langSel.value=savedLang;
function setLang(l){document.getElementById("title").textContent=texts[l].title;document.getElementById("subtitle").textContent=texts[l].sub;todoInput.placeholder=texts[l].todo;}
setLang(savedLang); langSel.onchange=()=>{setLang(langSel.value);localStorage.setItem("lang",langSel.value)};

// THEME
const themeSel=document.getElementById("theme"); const savedTheme=localStorage.getItem("theme"); 
if(savedTheme){document.body.style.background="var(--"+savedTheme+")"; themeSel.value=savedTheme;}
themeSel.onchange=()=>{
  const t=themeSel.value;
  document.body.style.background="var(--"+t+")";
  localStorage.setItem("theme",t);
};

// POINTS / BADGES
function save(){localStorage.setItem("todos",JSON.stringify(todos));localStorage.setItem("menu",JSON.stringify(menu));localStorage.setItem("groceries",JSON.stringify(groceries));localStorage.setItem("chat",JSON.stringify(chat));localStorage.setItem("history",JSON.stringify(history));localStorage.setItem("points",points);localStorage.setItem("level",level);renderBadges();}
function renderBadges(){const b=document.getElementById("badges");b.innerHTML="";if(points>=10)b.innerHTML+='<span class="badge">üî• D√©butant</span>';if(points>=30)b.innerHTML+='<span class="badge">üí™ Actif</span>';if(points>=60)b.innerHTML+='<span class="badge">üèÜ Expert</span>'}

// TODO
function renderTodos(){const ul=document.getElementById("list");ul.innerHTML="";todos.forEach((t,i)=>{const li=document.createElement("li");li.textContent=t.text;if(t.done)li.classList.add("done");li.onclick=()=>{t.done=!t.done;if(t.done)points+=5;save();renderTodos();};let timer;li.onmousedown=li.ontouchstart=()=>timer=setTimeout(()=>{li.classList.add("fadeOut");setTimeout(()=>{todos.splice(i,1);save();renderTodos();},300)},800);li.onmouseup=li.ontouchend=()=>clearTimeout(timer);ul.appendChild(li);});}
function addTodo(){const v=todoInput.value.trim();if(!v)return;todos.push({text:v,done:false});todoInput.value="";save();renderTodos();}

// MENU / COURSES
const days=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];
const recipes=[{n:"P√¢tes bolognaise",i:["p√¢tes","viande","tomate"]},{n:"Pizza",i:["p√¢te","fromage","tomate"]},{n:"Burger",i:["pain","viande","salade"]},{n:"Salade",i:["salade","tomate","concombre"]},{n:"Omelette",i:["≈ìufs","sel","poivre"]},{n:"Riz au poulet",i:["riz","poulet","√©pices"]},{n:"Soupe l√©gumes",i:["l√©gumes","eau","sel"]},{n:"Cr√™pes",i:["farine","≈ìufs","lait"]},{n:"Spaghetti carbonara",i:["spaghetti","lardons","≈ìufs","fromage"]},{n:"Poisson r√¥ti",i:["poisson","citron","herbes"]}];
function random(arr){return arr[Math.floor(Math.random()*arr.length)];}
function generateMenu(){menu=days.map(d=>{const old=menu.find(x=>x.startsWith(d)); return old||d+" : "+random(recipes).n;});renderMenu();save();}
function renderMenu(){const ul=document.getElementById("menu");ul.innerHTML="";menu.forEach((l,i)=>{const li=document.createElement("li");const day=l.split(" : ")[0];const meal=l.split(" : ")[1];const input=document.createElement("input");input.value=meal;input.onchange=()=>{menu[i]=day+" : "+input.value;save();};li.appendChild(document.createTextNode(day+" : "));li.appendChild(input);ul.appendChild(li);});}
function generateGroceries(){let set=new Set();menu.forEach(m=>{const name=m.split(" : ")[1];const r=recipes.find(x=>x.n===name);if(r)r.i.forEach(i=>set.add(i));});groceries=[...set];renderGroceries();save();}
function renderGroceries(){const ul=document.getElementById("groceries");ul.innerHTML="";groceries.forEach((it,i)=>{const li=document.createElement("li");li.textContent="üõí "+it;ul.appendChild(li);});}

// AI Sidebar
const aiSidebar=document.getElementById("aiSidebar"); const aiMenuBtn=document.getElementById("aiMenu"); const chatBox=document.getElementById("chatBox"); 
aiMenuBtn.onclick=()=>{aiSidebar.classList.toggle("show");chatBox.classList.toggle("show");renderHistory();}
function renderHistory(){const ul=document.getElementById("chatHistory");ul.innerHTML="";history.forEach((conv,i)=>{const li=document.createElement("li");li.textContent="Conversation "+(i+1);li.onclick=()=>{chat=[...history[i]];renderChat();};ul.appendChild(li);});}
function newChat(){chat=[];renderChat();}
function runAI(){const q=aiInput.value.trim();if(!q)return;points+=Math.max(1,Math.floor(q.length/6));let r="Je peux aider pour repas, recettes et organisation.";chat.push({from:"user",text:"üë§ "+aiInput.value});chat.push({from:"ai",text:"ü§ñ "+r});history.push([...chat]);aiInput.value="";save();renderChat();}
function renderChat(){const c=document.getElementById("chat");c.innerHTML="";chat.forEach((m,i)=>{const d=document.createElement("div");d.className="msg "+m.from;setTimeout(()=>{d.classList.add("show");},50);d.textContent=m.text;c.appendChild(d);c.scrollTop=c.scrollHeight;});}

// Clock
function updateClock(){document.getElementById("clock").textContent=new Date().toLocaleTimeString();}
setInterval(updateClock,1000);updateClock();

// Alarm
let alarmTimeout;
function setAlarm(){const time=document.getElementById("alarmTime").value;if(!time)return;const now=new Date();const parts=time.split(":");const alarm=new Date();alarm.setHours(parts[0],parts[1],0,0);if(alarm<now)alarm.setDate(alarm.getDate()+1);const diff=alarm-now;clearTimeout(alarmTimeout);alarmTimeout=setTimeout(()=>{alert("‚è∞ R√©veil !");},diff);document.getElementById("alarmMsg").textContent="R√©veil programm√© √† "+time;}

// Search
document.getElementById("searchInput").oninput=function(){const q=this.value.toLowerCase();document.querySelectorAll("#list li").forEach(li=>li.style.display=li.textContent.toLowerCase().includes(q)?"block":"none");document.querySelectorAll("#menu li input").forEach(input=>input.parentElement.style.display=input.value.toLowerCase().includes(q)?"block":"none");document.querySelectorAll("#groceries li").forEach(li=>li.style.display=li.textContent.toLowerCase().includes(q)?"block":"none");}

// INITIAL RENDER
renderTodos();renderMenu();renderGroceries();renderChat();save();
</script>
</body>
</html>
